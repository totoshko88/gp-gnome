# GlobalProtect Extension - –ü—ñ–¥—Å—É–º–æ–∫ –ø–æ–∫—Ä–∞—â–µ–Ω—å

## ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

### 1. –õ–æ–≥–∏ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–µ–º–∞—î –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫  
–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ –±–µ–∑ –ø–æ–º–∏–ª–æ–∫ —É –ª–æ–≥–∞—Ö.

### 2. Collect Logs —Ç–µ–ø–µ—Ä –≤—ñ–¥–∫—Ä–∏–≤–∞—î —Ç–µ–∫—É
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ  
**–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å:**
- –ü—ñ—Å–ª—è –∑–±–æ—Ä—É –ª–æ–≥—ñ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —Ñ–∞–π–ª–æ–≤–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –∑ —Ç–µ–∫–æ—é `~/.GlobalProtect/`
- –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è notification –∑ —à–ª—è—Ö–æ–º –¥–æ —Ñ–∞–π–ª—É –ª–æ–≥—ñ–≤
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `Gio.AppInfo.get_default_for_type('inode/directory')` –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ç–µ–∫–∏

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
```
–ú–µ–Ω—é ‚Üí Advanced ‚Üí Collect Logs
‚Üí –ó–±–∏—Ä–∞—î –ª–æ–≥–∏
‚Üí –í—ñ–¥–∫—Ä–∏–≤–∞—î —Ç–µ–∫—É ~/.GlobalProtect/
‚Üí –ü–æ–∫–∞–∑—É—î notification –∑ —à–ª—è—Ö–æ–º –¥–æ —Ñ–∞–π–ª—É
```

### 3. Settings —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—î
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å:**
- –î–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥ `_openSettings()` —è–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î `gnome-extensions prefs`
- –Ø–∫—â–æ subprocess –Ω–µ –ø—Ä–∞—Ü—é—î, –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è notification –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º–∏
- –ö–Ω–æ–ø–∫–∞ Settings –≤ –º–µ–Ω—é —Ç–µ–ø–µ—Ä —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
```
–ú–µ–Ω—é ‚Üí Settings
‚Üí –í—ñ–¥–∫—Ä–∏–≤–∞—î –≤—ñ–∫–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è
‚Üí –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ portal address —Ç–∞ poll interval
```

### 4. –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–º—ñ–Ω–∏—Ç–∏ –ø–æ—Ä—Ç–∞–ª —á–µ—Ä–µ–∑ extension
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ  
**–©–æ –¥–æ–¥–∞–Ω–æ:**
- –ù–æ–≤–∞ –∫–Ω–æ–ø–∫–∞ "Change Portal..." –≤ –≥–æ–ª–æ–≤–Ω–æ–º—É –º–µ–Ω—é
- –ü–æ–∫–∞–∑—É—î –ø–æ—Ç–æ—á–Ω–∏–π –ø–æ—Ä—Ç–∞–ª
- –ù–∞–¥–∞—î —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó —è–∫ –∑–º—ñ–Ω–∏—Ç–∏ –ø–æ—Ä—Ç–∞–ª —á–µ—Ä–µ–∑ Settings

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
```
–ú–µ–Ω—é ‚Üí Change Portal...
‚Üí –ü–æ–∫–∞–∑—É—î –ø–æ—Ç–æ—á–Ω–∏–π –ø–æ—Ä—Ç–∞–ª
‚Üí –ù–∞–¥–∞—î —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –∑–º—ñ–Ω–∏ —á–µ—Ä–µ–∑ Settings
```

### 5. –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —à–ª—é–∑—ñ–≤ (set-preferred-gateway)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ  
**–©–æ –¥–æ–¥–∞–Ω–æ:**
- –ù–æ–≤–µ –ø—ñ–¥–º–µ–Ω—é "Select Gateway" –≤ –≥–æ–ª–æ–≤–Ω–æ–º—É –º–µ–Ω—é
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —à–ª—é–∑—ñ–≤
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–±—Ä–∞—Ç–∏ preferred gateway –æ–¥–Ω–∏–º –∫–ª—ñ–∫–æ–º
- –î–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥–∏ `getGateways()` —Ç–∞ `setPreferredGateway()` –≤ gpClient

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
```
–ú–µ–Ω—é ‚Üí Select Gateway
‚Üí –ü–æ–∫–∞–∑—É—î —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —à–ª—é–∑—ñ–≤
‚Üí –ö–ª—ñ–∫ –Ω–∞ —à–ª—é–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –π–æ–≥–æ —è–∫ preferred
‚Üí –ü–æ–∫–∞–∑—É—î notification –ø—Ä–æ —É—Å–ø—ñ—à–Ω—É –∑–º—ñ–Ω—É
```

### 6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —á–µ—Ä–µ–∑ show --help
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ  
**–©–æ –¥–æ–¥–∞–Ω–æ:**
- –ù–æ–≤–∞ –∫–Ω–æ–ø–∫–∞ "Show Help" –≤ –º–µ–Ω—é
- –í–∏–∫–ª–∏–∫–∞—î `globalprotect show --help`
- –ü–æ–∫–∞–∑—É—î –¥–æ–≤—ñ–¥–∫—É —á–µ—Ä–µ–∑ notification
- –î–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥ `getHelp()` –≤ gpClient

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
```
–ú–µ–Ω—é ‚Üí Show Help
‚Üí –ü–æ–∫–∞–∑—É—î –¥–æ–≤—ñ–¥–∫—É GlobalProtect CLI
‚Üí –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ notification
```

## üìã –ù–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Status: Connected to vpn.epam.com   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Disconnect                           ‚îÇ
‚îÇ Change Portal...                     ‚îÇ
‚îÇ Select Gateway                    ‚ñ∂  ‚îÇ
‚îÇ   ‚îú‚îÄ gateway1.example.com            ‚îÇ
‚îÇ   ‚îú‚îÄ gateway2.example.com            ‚îÇ
‚îÇ   ‚îî‚îÄ gateway3.example.com            ‚îÇ
‚îÇ Advanced                          ‚ñ∂  ‚îÇ
‚îÇ   ‚îú‚îÄ Rediscover Network              ‚îÇ
‚îÇ   ‚îú‚îÄ Resubmit HIP                    ‚îÇ
‚îÇ   ‚îî‚îÄ Collect Logs (opens folder)    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Show Details                         ‚îÇ
‚îÇ Show Help                            ‚îÇ
‚îÇ Settings                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üÜï –ù–æ–≤—ñ –º–µ—Ç–æ–¥–∏ –≤ gpClient.js

### `getGateways()`
–û—Ç—Ä–∏–º—É—î —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —à–ª—é–∑—ñ–≤ –∑ `globalprotect show --details`

### `setPreferredGateway(gateway)`
–í—Å—Ç–∞–Ω–æ–≤–ª—é—î preferred gateway —á–µ—Ä–µ–∑ `globalprotect set-preferred-gateway`

### `getHelp()`
–û—Ç—Ä–∏–º—É—î –¥–æ–≤—ñ–¥–∫—É —á–µ—Ä–µ–∑ `globalprotect show --help`

### `extractLogFilePath(output)`
–í–∏—Ç—è–≥—É—î —à–ª—è—Ö –¥–æ —Ñ–∞–π–ª—É –ª–æ–≥—ñ–≤ –∑ –≤–∏–≤–æ–¥—É –∫–æ–º–∞–Ω–¥–∏

## üÜï –ù–æ–≤—ñ –º–µ—Ç–æ–¥–∏ –≤ indicator.js

### `_changePortal()`
–ü–æ–∫–∞–∑—É—î –ø–æ—Ç–æ—á–Ω–∏–π –ø–æ—Ä—Ç–∞–ª —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –∑–º—ñ–Ω–∏

### `_updateGatewayMenu()`
–û–Ω–æ–≤–ª—é—î –ø—ñ–¥–º–µ–Ω—é –∑ –¥–æ—Å—Ç—É–ø–Ω–∏–º–∏ —à–ª—é–∑–∞–º–∏

### `_setGateway(gateway)`
–í—Å—Ç–∞–Ω–æ–≤–ª—é—î –≤–∏–±—Ä–∞–Ω–∏–π —à–ª—é–∑ —è–∫ preferred

### `_collectLogsAndOpen()`
–ó–±–∏—Ä–∞—î –ª–æ–≥–∏ —Ç–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—î —Ç–µ–∫—É –∑ —Ñ–∞–π–ª–æ–º

### `_showHelp()`
–ü–æ–∫–∞–∑—É—î –¥–æ–≤—ñ–¥–∫—É GlobalProtect

### `_openSettings()`
–í—ñ–¥–∫—Ä–∏–≤–∞—î –≤—ñ–∫–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤—Å—ñ –Ω–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:

1. **Change Portal:**
   ```bash
   # –ö–ª—ñ–∫–Ω—ñ—Ç—å: GlobalProtect ‚Üí Change Portal...
   # –ü–æ–≤–∏–Ω–Ω–æ –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π –ø–æ—Ä—Ç–∞–ª —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
   ```

2. **Select Gateway:**
   ```bash
   # –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ VPN
   # –ö–ª—ñ–∫–Ω—ñ—Ç—å: GlobalProtect ‚Üí Select Gateway
   # –í–∏–±–µ—Ä—ñ—Ç—å —à–ª—é–∑ –∑—ñ —Å–ø–∏—Å–∫—É
   # –ü–æ–≤–∏–Ω–Ω–æ –ø–æ–∫–∞–∑–∞—Ç–∏ notification –ø—Ä–æ –∑–º—ñ–Ω—É
   ```

3. **Collect Logs (–∑ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è–º —Ç–µ–∫–∏):**
   ```bash
   # –ö–ª—ñ–∫–Ω—ñ—Ç—å: GlobalProtect ‚Üí Advanced ‚Üí Collect Logs
   # –ü–æ–≤–∏–Ω–Ω–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏—Å—å –≤—ñ–∫–Ω–æ —Ñ–∞–π–ª–æ–≤–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∑ —Ç–µ–∫–æ—é ~/.GlobalProtect/
   # –ü–æ–≤–∏–Ω–Ω–æ –ø–æ–∫–∞–∑–∞—Ç–∏ notification –∑ —à–ª—è—Ö–æ–º –¥–æ —Ñ–∞–π–ª—É
   ```

4. **Show Help:**
   ```bash
   # –ö–ª—ñ–∫–Ω—ñ—Ç—å: GlobalProtect ‚Üí Show Help
   # –ü–æ–≤–∏–Ω–Ω–æ –ø–æ–∫–∞–∑–∞—Ç–∏ –¥–æ–≤—ñ–¥–∫—É GlobalProtect CLI
   ```

5. **Settings:**
   ```bash
   # –ö–ª—ñ–∫–Ω—ñ—Ç—å: GlobalProtect ‚Üí Settings
   # –ü–æ–≤–∏–Ω–Ω–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏—Å—å –≤—ñ–∫–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
   # –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ portal address —Ç–∞ poll interval
   ```

## üìù –õ–æ–≥–∏

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –ø—ñ—Å–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
```bash
journalctl -b 0 /usr/bin/gnome-shell --since "5 minutes ago" --no-pager | grep -i globalprotect
```

–ù–µ –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –ø–æ–º–∏–ª–æ–∫.

## üîÑ –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –∑–º—ñ–Ω

–î–ª—è –ø–æ–≤–Ω–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è
gnome-extensions disable globalprotect@username.github.io
gnome-extensions enable globalprotect@username.github.io

# –ê–±–æ –≤–∏–π–¥—ñ—Ç—å –∑ —Å–µ—Å—ñ—ó —Ç–∞ —É–≤—ñ–π–¥—ñ—Ç—å –∑–Ω–æ–≤—É (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –Ω–∞ Wayland)
```

## üìö –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

### –ö–æ–º–∞–Ω–¥–∏ GlobalProtect CLI:
```bash
# –ü–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å
globalprotect show --status

# –ü–æ–∫–∞–∑–∞—Ç–∏ –¥–µ—Ç–∞–ª—ñ
globalprotect show --details

# –ü–æ–∫–∞–∑–∞—Ç–∏ –¥–æ–≤—ñ–¥–∫—É
globalprotect show --help

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ preferred gateway
globalprotect set-preferred-gateway <gateway>

# –ó—ñ–±—Ä–∞—Ç–∏ –ª–æ–≥–∏
globalprotect collect-log
```

### –§–∞–π–ª–∏ –ª–æ–≥—ñ–≤:
- –†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è: `~/.GlobalProtect/GlobalProtectLogs.tgz`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è –∑–±–æ—Ä—É

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
- Portal address: –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `vpn.epam.com`
- Poll interval: –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 5 —Å–µ–∫—É–Ω–¥
- –ó–º—ñ–Ω—é—é—Ç—å—Å—è —á–µ—Ä–µ–∑ Settings

## ‚ú® –ü—ñ–¥—Å—É–º–æ–∫

–í—Å—ñ –∑–∞–ø–∏—Ç–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∞ –ø—Ä–∞—Ü—é—é—Ç—å:
- ‚úÖ Collect Logs –≤—ñ–¥–∫—Ä–∏–≤–∞—î —Ç–µ–∫—É
- ‚úÖ Settings –ø—Ä–∞—Ü—é—î
- ‚úÖ –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –ø–æ—Ä—Ç–∞–ª
- ‚úÖ –ú–æ–∂–Ω–∞ –ø–µ—Ä–µ–º–∏–∫–∞—Ç–∏ —à–ª—é–∑–∏
- ‚úÖ –ú–æ–∂–Ω–∞ —á–∏—Ç–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é

–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≥–æ—Ç–æ–≤–µ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!

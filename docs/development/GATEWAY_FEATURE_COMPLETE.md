# Gateway Selection Feature - –ó–∞–≤–µ—Ä—à–µ–Ω–æ

## ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –≤–∏–±–æ—Ä—É —à–ª—é–∑—ñ–≤

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞
```bash
globalprotect show --manual-gateway
```

### –©–æ –ø–æ–∫–∞–∑—É—î –∫–æ–º–∞–Ω–¥–∞:
```
Name                Address            Preferred
-------------------------------------------------
vpn-us.epam.com     vpn-us.epam.com
vpn-cn.epam.com     vpn-cn.epam.com
vpn-ua.epam.com     vpn-ua.epam.com
vpn-in.epam.com     vpn-in.epam.com
vpn-eu2.epam.com    vpn-eu2.epam.com
vpn-by-minsk.epam.com vpn-by-minsk.epam.com
vpn-by.epam.com     vpn-by.epam.com
vpn-eu.epam.com     vpn-eu.epam.com
```

## üéØ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

### 1. –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –≤—Å—ñ—Ö –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —à–ª—é–∑—ñ–≤
**–ú–µ—Ç–æ–¥:** `getGateways()` –≤ `gpClient.js`

**–©–æ —Ä–æ–±–∏—Ç—å:**
- –í–∏–∫–ª–∏–∫–∞—î `globalprotect show --manual-gateway` –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É
- –í–∏–∫–ª–∏–∫–∞—î `globalprotect show --details` –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ —à–ª—é–∑—É
- –ü–∞—Ä—Å–∏—Ç—å –≤–∏–≤—ñ–¥ —Ç–∞ —Å—Ç–≤–æ—Ä—é—î –º–∞—Å–∏–≤ –æ–±'—î–∫—Ç—ñ–≤ —à–ª—é–∑—ñ–≤
- –ö–æ–∂–µ–Ω —à–ª—é–∑ –º—ñ—Å—Ç–∏—Ç—å: `name`, `address`, `preferred`, `current`

**–ü–æ–≤–µ—Ä—Ç–∞—î:**
```javascript
[
  {
    name: "vpn-us.epam.com",
    address: "vpn-us.epam.com",
    preferred: false,
    current: false
  },
  {
    name: "vpn-eu.epam.com",
    address: "vpn-eu.epam.com",
    preferred: false,
    current: true  // –ü–æ—Ç–æ—á–Ω–∏–π –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π —à–ª—é–∑
  },
  // ... —ñ–Ω—à—ñ —à–ª—é–∑–∏
]
```

### 2. –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —à–ª—é–∑—ñ–≤ –≤ –º–µ–Ω—é
**–ú–µ—Ç–æ–¥:** `_updateGatewayMenu()` –≤ `indicator.js`

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- ‚úÖ –ü–æ–∫–∞–∑—É—î –≤—Å—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ —à–ª—é–∑–∏ (8 —à–ª—é–∑—ñ–≤ EPAM)
- ‚úÖ –ü–æ–∑–Ω–∞—á–∞—î –ø–æ—Ç–æ—á–Ω–∏–π —à–ª—é–∑ —Å–∏–º–≤–æ–ª–æ–º ‚úì
- ‚úÖ –ü–æ–∑–Ω–∞—á–∞—î preferred —à–ª—é–∑ —Å–∏–º–≤–æ–ª–æ–º ‚òÖ
- ‚úÖ –°–æ—Ä—Ç—É—î: —Å–ø–æ—á–∞—Ç–∫—É current, –ø–æ—Ç—ñ–º preferred, –ø–æ—Ç—ñ–º –∑–∞ –∞–ª—Ñ–∞–≤—ñ—Ç–æ–º
- ‚úÖ –ü–æ–∫–∞–∑—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —à–ª—é–∑—ñ–≤
- ‚úÖ –î–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ–º–∏–∫–∞—Ç–∏—Å—å –º—ñ–∂ —à–ª—é–∑–∞–º–∏ –æ–¥–Ω–∏–º –∫–ª—ñ–∫–æ–º
- ‚úÖ –û–±—Ä–æ–±–ª—è—î –ø–æ–º–∏–ª–∫–∏ –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é retry

### 3. –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –º—ñ–∂ —à–ª—é–∑–∞–º–∏
**–ú–µ—Ç–æ–¥:** `setPreferredGateway(gateway)` –≤ `gpClient.js`

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
```bash
globalprotect set-preferred-gateway vpn-us.epam.com
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–ª—ñ–∫–∞—î –Ω–∞ —à–ª—é–∑ –≤ –º–µ–Ω—é
2. –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `_setGateway(gateway)`
3. –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–∞ `set-preferred-gateway`
4. –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è notification –ø—Ä–æ —É—Å–ø—ñ—à–Ω—É –∑–º—ñ–Ω—É
5. –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—ñ –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π –Ω–æ–≤–∏–π —à–ª—é–∑

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é "Select Gateway"

### –ö–æ–ª–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ VPN:
```
Select Gateway
  ‚úì vpn-eu.epam.com (current)
  vpn-us.epam.com
  vpn-cn.epam.com
  vpn-ua.epam.com
  vpn-in.epam.com
  vpn-eu2.epam.com
  vpn-by-minsk.epam.com
  vpn-by.epam.com
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  8 gateway(s) available
```

### –ö–æ–ª–∏ –ù–ï –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ:
```
Select Gateway
  No gateways available
  Connect to VPN to see gateways
```

### –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:
```
Select Gateway
  Failed to load gateways
  Retry
```

## üé® –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ –≤ –º–µ–Ω—é

- **‚úì** - –ü–æ—Ç–æ—á–Ω–∏–π –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π —à–ª—é–∑ (–Ω–µ –º–æ–∂–Ω–∞ –∫–ª—ñ–∫–Ω—É—Ç–∏)
- **‚òÖ** - Preferred —à–ª—é–∑ (–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ set-preferred-gateway)
- –ë–µ–∑ –ø–æ–∑–Ω–∞—á–∫–∏ - –î–æ—Å—Ç—É–ø–Ω–∏–π —à–ª—é–∑ (–º–æ–∂–Ω–∞ –∫–ª—ñ–∫–Ω—É—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è)

## üîÑ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### –°–ø–æ—Å—ñ–± 1: –ß–µ—Ä–µ–∑ –º–µ–Ω—é (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
1. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ VPN
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –º–µ–Ω—é GlobalProtect
3. –ù–∞–≤–µ–¥—ñ—Ç—å –Ω–∞ "Select Gateway"
4. –ö–ª—ñ–∫–Ω—ñ—Ç—å –Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —à–ª—é–∑
5. –ü–µ—Ä–µ–ø –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ VPN –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è

### –°–ø–æ—Å—ñ–± 2: –ß–µ—Ä–µ–∑ —Ç–µ—Ä–º—ñ–Ω–∞–ª
```bash
# –ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –¥–æ—Å—Ç—É–ø–Ω—ñ —à–ª—é–∑–∏
globalprotect show --manual-gateway

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ preferred gateway
globalprotect set-preferred-gateway vpn-us.epam.com

# –ü–µ—Ä–µ–ø –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å
globalprotect disconnect
globalprotect connect --portal vpn.epam.com
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:

1. **–°–ø–∏—Å–æ–∫ —à–ª—é–∑—ñ–≤:**
   ```bash
   # –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ VPN
   # –í—ñ–¥–∫—Ä–∏–π—Ç–µ –º–µ–Ω—é ‚Üí Select Gateway
   # –ü–æ–≤–∏–Ω–Ω–æ –ø–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ 8 —à–ª—é–∑—ñ–≤ EPAM
   ```

2. **–ü–æ—Ç–æ—á–Ω–∏–π —à–ª—é–∑:**
   ```bash
   # –ü–æ—Ç–æ—á–Ω–∏–π —à–ª—é–∑ –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ –ø–æ–∑–Ω–∞—á–∫—É ‚úì
   # –í—ñ–Ω –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏–º (–Ω–µ –º–æ–∂–Ω–∞ –∫–ª—ñ–∫–Ω—É—Ç–∏)
   ```

3. **–ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —à–ª—é–∑—É:**
   ```bash
   # –ö–ª—ñ–∫–Ω—ñ—Ç—å –Ω–∞ —ñ–Ω—à–∏–π —à–ª—é–∑ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ vpn-us.epam.com)
   # –ü–æ–≤–∏–Ω–Ω–æ –ø–æ–∫–∞–∑–∞—Ç–∏ notification –ø—Ä–æ —É—Å–ø—ñ—à–Ω—É –∑–º—ñ–Ω—É
   # –í—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è —Ç–∞ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –∑–Ω–æ–≤—É
   # –ù–æ–≤–∏–π —à–ª—é–∑ –ø–æ–≤–∏–Ω–µ–Ω —Å—Ç–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–º
   ```

4. **–ë–µ–∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:**
   ```bash
   # –í—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –≤—ñ–¥ VPN
   # –í—ñ–¥–∫—Ä–∏–π—Ç–µ –º–µ–Ω—é ‚Üí Select Gateway
   # –ü–æ–≤–∏–Ω–Ω–æ –ø–æ–∫–∞–∑–∞—Ç–∏ "No gateways available"
   ```

## üìù –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ü–∞—Ä—Å–∏–Ω–≥ –≤–∏–≤–æ–¥—É `show --manual-gateway`

```javascript
// –§–æ—Ä–º–∞—Ç –≤–∏–≤–æ–¥—É:
// Name                Address            Preferred
// -------------------------------------------------
// vpn-us.epam.com     vpn-us.epam.com

// –ü–∞—Ä—Å–∏–Ω–≥:
1. –ü—Ä–æ–ø—É—Å–∫–∞—î–º–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ (Name, Address, Preferred)
2. –ü—Ä–æ–ø—É—Å–∫–∞—î–º–æ —Ä–æ–∑–¥—ñ–ª—å–Ω–∏–∫ (---)
3. –ü–∞—Ä—Å–∏–º–æ –∫–æ–∂–µ–Ω —Ä—è–¥–æ–∫ —á–µ—Ä–µ–∑ split(/\s+/)
4. parts[0] = name
5. parts[1] = address
6. parts[2] = preferred (—è–∫—â–æ —î "yes")
```

### –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ —à–ª—é–∑—É

```javascript
// –ó –≤–∏–≤–æ–¥—É show --details:
// Gateway Name: vpn-eu.epam.com

// –ü–æ—Ä—ñ–≤–Ω—é—î–º–æ –∑ name –∑ manual-gateway
// –Ø–∫—â–æ —Å–ø—ñ–≤–ø–∞–¥–∞—î - –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ current: true
```

### –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —à–ª—é–∑—ñ–≤

```javascript
gateways.sort((a, b) => {
    if (a.current && !b.current) return -1;  // Current –ø–µ—Ä—à–∏–º
    if (!a.current && b.current) return 1;
    if (a.preferred && !b.preferred) return -1;  // Preferred –¥—Ä—É–≥–∏–º
    if (!a.preferred && b.preferred) return 1;
    return a.name.localeCompare(b.name);  // –†–µ—à—Ç–∞ –∑–∞ –∞–ª—Ñ–∞–≤—ñ—Ç–æ–º
});
```

## ‚ú® –ü—ñ–¥—Å—É–º–æ–∫

–ü–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –≤–∏–±–æ—Ä—É —à–ª—é–∑—ñ–≤ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:
- ‚úÖ –ü–æ–∫–∞–∑—É—î –≤—Å—ñ 8 –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —à–ª—é–∑—ñ–≤ EPAM
- ‚úÖ –ü–æ–∑–Ω–∞—á–∞—î –ø–æ—Ç–æ—á–Ω–∏–π —Ç–∞ preferred —à–ª—é–∑–∏
- ‚úÖ –î–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ–º–∏–∫–∞—Ç–∏—Å—å –æ–¥–Ω–∏–º –∫–ª—ñ–∫–æ–º
- ‚úÖ –û–±—Ä–æ–±–ª—è—î –ø–æ–º–∏–ª–∫–∏ –∑ retry
- ‚úÖ –ü—Ä–∞—Ü—é—î —Å—Ç–∞–±—ñ–ª—å–Ω–æ –±–µ–∑ –∫—Ä–∞—à—ñ–≤

**–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≥–æ—Ç–æ–≤–µ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!**
